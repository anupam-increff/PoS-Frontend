<div class="feature-grid">
  <div class="feature-card">
    <!-- Tabs -->
    <ul class="nav nav-tabs mb-3">
      <li class="nav-item">
        <a class="nav-link" [class.active]="tab === 'create'" (click)="setTab('create')">
          <i class="fas fa-plus me-1"></i> Create Order
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" [class.active]="tab === 'search'" (click)="setTab('search')">
          <i class="fas fa-search me-1"></i> Search Order
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" [class.active]="tab === 'list'" (click)="setTab('list')">
          <i class="fas fa-list me-1"></i> Order List
        </a>
      </li>
    </ul>

    <!-- ✅ Create Order Tab -->
    <div *ngIf="tab === 'create'">
      <form [formGroup]="orderForm" (ngSubmit)="submitOrder()">
        <div formArrayName="items">
          <div *ngFor="let item of items.controls; let i = index" [formGroupName]="i" class="row g-2 mb-3">
            <div class="col-md-4">
              <input type="text" class="form-control" formControlName="barcode" placeholder="Barcode">
            </div>
            <div class="col-md-3">
              <input type="number" class="form-control" formControlName="quantity" placeholder="Quantity">
            </div>
            <div class="col-md-3">
              <input type="number" class="form-control" formControlName="sellingPrice" placeholder="Selling Price">
            </div>
            <div class="col-md-2 d-grid">
              <button type="button" class="btn btn-outline-danger" (click)="removeItem(i)" [disabled]="items.length === 1">
                <i class="fas fa-trash-alt"></i>
              </button>
            </div>
          </div>
        </div>
        <button type="button" class="btn btn-outline-secondary btn-sm mb-3" (click)="addItem()">Add Row</button>
        <div class="d-flex justify-content-end">
          <button type="submit" class="btn btn-primary" [disabled]="orderForm.invalid || loading">
            {{ loading ? 'Creating...' : 'Create Order' }}
          </button>
        </div>
      </form>

      <div *ngIf="successMsg" class="alert alert-success mt-3">{{ successMsg }}</div>
      <div *ngIf="errorMsg" class="alert alert-danger mt-3">{{ errorMsg }}</div>
    </div>

    <!-- 🔍 Search Order Tab -->
    <div *ngIf="tab === 'search'">
      <form (ngSubmit)="searchOrder()" class="mb-3">
        <label class="form-label">Enter Order ID or Barcode</label>
        <input type="text" class="form-control mb-2" [(ngModel)]="searchInput" name="searchInput" placeholder="Search...">
        <div class="d-flex justify-content-end">
          <button type="submit" class="btn btn-primary" [disabled]="!searchInput.trim()">Search</button>
        </div>
      </form>
      <div *ngIf="errorMsg" class="alert alert-danger">{{ errorMsg }}</div>
    </div>

    <!-- 📋 Order List Placeholder Tab -->
    <div *ngIf="tab === 'list'" class="text-center text-muted p-5">
      <i class="fas fa-inbox fa-2x mb-3"></i>
      <p>No order list view implemented yet.</p>
    </div>
  </div>
</div>
